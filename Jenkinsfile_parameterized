#!groovy
@Library("Infrastructure") _

properties([
  parameters([
    choice(name: 'ENVIRONMENT', choices: 'sandbox', description: 'Environment where code should be build and deployed')
  ]),
  pipelineTriggers([[$class: 'GitHubPushTrigger']])
])

def vaultOverrides = [
  'preview': 'aat'
]

withParameterizedPipeline('java', 'ccd', 'test-stubs-service', params.ENVIRONMENT, 'sandbox') {
  enableSlackNotifications('#ccd-param-builds')
  overrideVaultEnvironments(vaultOverrides)
}
